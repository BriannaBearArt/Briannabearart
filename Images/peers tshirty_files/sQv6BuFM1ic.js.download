;/*FB_PKG_DELIM*/

__d("CometMessagingJewelDropdownRestoreUpsellQuery.graphql",["CometMessagingJewelDropdownRestoreUpsellQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:!1,kind:"LocalArgument",name:"qpWithPinEnabled"}],c={alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"jewel_softblock_state",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"is_eb_restore_upsells_dismissed",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},h={alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null},i={alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c,f],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometMessagingJewelDropdownRestoreUpsellQuery",selections:[{args:[{kind:"Variable",name:"qpWithPinEnabled",variableName:"qpWithPinEnabled"},{kind:"Literal",name:"shouldShowEBThreadListUpsells",value:!0}],kind:"FragmentSpread",name:"CometMessagingJewelDropdownContent_query"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWChatEncryptedBackupsRestoreUpsellWrapper_viewer"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c],storageKey:null},{kind:"ClientExtension",selections:[d,e]}],storageKey:null},action:"THROW",path:"viewer"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWChatEncryptedBackupsRestoreUpsellWrapper_xfbEncryptedBackup"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometMessagingJewelDropdownRestoreUpsellQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},f],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'},f,g],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[h,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null},d,e]},{alias:"jewel_qp",args:[{kind:"Literal",name:"surface_nux_id",value:8439},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"3t4y6p"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerInstructorBeforeClassRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerInstructorBeforeClassRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerInstructorAfterClassRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerInstructorAfterClassRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerLearnerBeforeClassRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerLearnerBeforeClassRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerDesktopDownloadBannerLearnerAfterClassRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerDesktopDownloadBannerLearnerAfterClassRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerWebEPDBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebEPDBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerWebPrivacyPolicyNoticeBannerRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebPrivacyPolicyNoticeBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionArmadilloSecurityAlertsSettingsDefaultOffBannerRendererStrategy_cometQuickPromotionBaseStrategy",fragmentPropName:"cometQuickPromotionBaseStrategy",kind:"ModuleImport"}],type:"CometQuickPromotionArmadilloSecurityAlertsSettingsDefaultOffBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelDropdownQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMWXCardRendererStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometQuickPromotionMWXCardRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"3t4y6p")'}],storageKey:null},f],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:8439,trigger:"MESSAGING_JEWEL_OPEN")'},{alias:null,args:[{kind:"Literal",name:"surface_nux_id",value:10713},{kind:"Literal",name:"trigger",value:"MESSAGING_JEWEL_COMMUNITIES_TAB_OPEN"}],concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"xxYRh"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{args:null,documentName:"CometMessagingJewelCommunitiesQPBannerContainer_viewer",fragmentName:"CometQuickPromotionMessengerWebCommunitiesBannerRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebCommunitiesBannerRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"xxYRh")'}],storageKey:null},f],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10713,trigger:"MESSAGING_JEWEL_COMMUNITIES_TAB_OPEN")'},{alias:null,args:null,concreteType:"GroupsTab",kind:"LinkedField",name:"groups_tab",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerGlobalFBGroupChat",kind:"LinkedField",name:"suggested_chats",plural:!0,selections:[f],storageKey:null}],storageKey:null},i],storageKey:null},{"if":null,kind:"Defer",label:"MWEncryptedBackupsJewelNuxWrapper_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query_3fzEYt",selections:[{"if":null,kind:"Defer",label:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query$defer$MWEncryptedBackupsThreadListRestoreQPWrapper_query_3fzEYt",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{condition:"qpWithPinEnabled",kind:"Condition",passingValue:!0,selections:[h,i,{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"qp_with_pin_state",storageKey:null}]}]}],storageKey:null}]}]}]},params:{id:b("CometMessagingJewelDropdownRestoreUpsellQuery_facebookRelayOperation"),metadata:{},name:"CometMessagingJewelDropdownRestoreUpsellQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWChatEncryptedBackupsRestoreUpsellWrapper_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsRestoreUpsellWrapper_viewer",selections:[{args:null,kind:"FragmentSpread",name:"MWChatEncryptedBackupsRestoreUpsellLoader_viewer"}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("MWChatEncryptedBackupsRestoreUpsellWrapper_xfbEncryptedBackup.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsRestoreUpsellWrapper_xfbEncryptedBackup",selections:[{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],type:"XFBEncryptedBackup",abstractKey:null};e.exports=a}),null);
__d("MWChatEncryptedBackupsRestoreUpsellWrapper",["BaseMultiStepContainer.react","CometMessagingJewelDropdownContentGlimmer.react","CometPlaceholder.react","CometRelay","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsRestoreUpsellWrapper_viewer.graphql","MWChatEncryptedBackupsRestoreUpsellWrapper_xfbEncryptedBackup.graphql","MWEBVirtualDevicesContextProvider.react","cr:6327","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay","useLabyrinthLogging","useMWEBFlowSourceContext","useMWEncryptedBackupsGetVirtualDevicesPreloaded"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react"),l=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWChatEncryptedBackupsRestoreUpsellLoader.react").__setRef("MWChatEncryptedBackupsRestoreUpsellWrapper"));function a(a){var e=d("react-compiler-runtime").c(14),f=a.displayAutoRestoreConsentScreenOnLoad,g=a.onCloseSoftblock,j=a.query;a=a.viewer;var n=d("CometRelay").useFragment(h!==void 0?h:h=b("MWChatEncryptedBackupsRestoreUpsellWrapper_viewer.graphql"),a),o=d("CometRelay").useFragment(i!==void 0?i:i=b("MWChatEncryptedBackupsRestoreUpsellWrapper_xfbEncryptedBackup.graphql"),j);e[0]!==o?(a={encryptedBackup:o},e[0]=o,e[1]=a):a=e[1];j=c("useMWEncryptedBackupsGetVirtualDevicesPreloaded")(a);a=j.getVirtualDevices;e[2]!==a?(j=a(),e[2]=a,e[3]=j):j=e[3];a=j;var p=a.offlineDevicesCount,q=a.vestaClientID,r=c("useMWEBFlowSourceContext")();j=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var s=j.startFlow;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx(c("CometMessagingJewelDropdownContentGlimmer.react"),{}),e[4]=a):a=e[4];e[5]!==f||e[6]!==r||e[7]!==p||e[8]!==g||e[9]!==s||e[10]!==q||e[11]!==n||e[12]!==(o==null?void 0:o.has_otc_eligible_devices)?(j=k.jsx(c("CometPlaceholder.react"),{fallback:a,name:"MWChatEncryptedBackupsRestoreUpsellWrapper.AutoRestoreConsent",children:f&&b("cr:6327")!=null?k.jsx(b("cr:6327"),{onCloseSoftblock:g}):k.jsx(c("BaseMultiStepContainer.react"),{expanding:!0,children:function(a){var e,f=b("cr:6327")!=null?function(){a(function(){s({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,source:r()});return k.jsx(b("cr:6327"),{onCloseSoftblock:g})})}:m;return k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("CometMessagingJewelDropdownContentGlimmer.react"),{}),name:"MWChatEncryptedBackupsRestoreUpsellWrapper.RestoreUpsell",children:k.jsx(c("MWEBVirtualDevicesContextProvider.react"),{hasOtcEligibleDevicesInitialValue:(e=o==null?void 0:o.has_otc_eligible_devices)!=null?e:void 0,offlineDevicesCountInitialValue:p,vestaClientIDInitialValue:q,children:k.jsx(l,{onCloseSoftblock:g,pushAutoRestoreConsentPage:f,source:r(),viewer:n})})})}})}),e[5]=f,e[6]=r,e[7]=p,e[8]=g,e[9]=s,e[10]=q,e[11]=n,e[12]=o==null?void 0:o.has_otc_eligible_devices,e[13]=j):j=e[13];return j}function m(){}g["default"]=a}),98);
__d("MWEBJewelSoftblockState.enum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({INITIAL:0,RESTORE_IN_PROGRESS:1,CONSENT_SCREEN:2});c=a;f["default"]=c}),66);
__d("CometMessagingJewelDropdownRestoreUpsell.react",["fbt","BaseMultiStepContainer.react","CometErrorBoundary.react","CometMessagingJewelDropdownContent.react","CometMessagingJewelDropdownRestoreUpsellQuery.graphql","CometRelay","CometTopNavListDropdown.react","FBLogger","I64","InteractionTracingMetrics","LSAuthorityLevel","LSIntEnum","MWChatEncryptedBackupsQPLSource.enum","MWChatEncryptedBackupsRestoreUpsellWrapper","MWEBFlowSourceContextProvider.react","MWEBJewelSoftblockState.enum","MWEBUpsellDismissedEnum.facebook","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","ReQL","ReQLSuspense","cr:6092","gkx","hero-tracing-placeholder","react","react-compiler-runtime","stylex","useReStore","useTopMostRouteCometEntityKey"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n,o=n||(n=d("react"));e=n;e.useCallback;var p=e.useContext,q=e.useEffect,r=e.useRef,s=e.useState,t={cardWidth:{width:"x1cvmir6",$$css:!0}};function a(a){var e,g,k=d("react-compiler-runtime").c(38),l=a.props;a=a.queries;var n=l.onClose;l=a.jewelUpsellQueryRef;a=c("useTopMostRouteCometEntityKey")();var w=d("CometRelay").usePreloadedQuery(i!==void 0?i:i=b("CometMessagingJewelDropdownRestoreUpsellQuery.graphql"),l);l=(a==null?void 0:a.entity_type)==="home"&&a.section==="community";var x=(j||(j=c("useReStore")))(),y=d("CometRelay").useRelayEnvironment();k[0]!==x.tables.secure_encrypted_backups_client_state?(a=function(){return d("ReQL").fromTableAscending(x.tables.secure_encrypted_backups_client_state).filter(v)},k[0]=x.tables.secure_encrypted_backups_client_state,k[1]=a):a=k[1];var z;k[2]!==x?(z=[x],k[2]=x,k[3]=z):z=k[3];a=d("ReQLSuspense").useFirst(a,z,f.id+":106");k[4]===Symbol["for"]("react.memo_cache_sentinel")?(z=d("MWEBUseLocalStorage").mwEBGetIsLocalStorageEntryValuePresent(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_SHOULD_NOT_DISPLAY_SOFTBLOCK),k[4]=z):z=k[4];z=s(z);var A=z[0],B=z[1];z=(w==null?void 0:w.viewer.is_eb_restore_upsells_dismissed)===d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.ALL_DISMISSED;a=a!=null;e=(w==null?void 0:(e=w.viewer)==null?void 0:e.jewel_softblock_state)===c("MWEBJewelSoftblockState.enum").RESTORE_IN_PROGRESS;var C=(w==null?void 0:(g=w.viewer)==null?void 0:g.jewel_softblock_state)===c("MWEBJewelSoftblockState.enum").CONSENT_SCREEN,D=!A&&!z&&!a||e&&!z||C&&!c("gkx")("5229");g=s(C);var E=g[0],F=g[1],G=p(d("hero-tracing-placeholder").HeroCurrentInteractionForLoggingContext);k[5]!==y?(A=function(){return d("CometRelay").commitLocalUpdate(y,u)},k[5]=y,k[6]=A):A=k[6];var H=A,I=r(!1),J=c("MWChatEncryptedBackupsQPLSource.enum").JEWEL_RESTORE_SOFTBLOCK,K=b("cr:6092")();k[7]!==H?(a=function(){H(),F(!1),B(!0)},k[7]=H,k[8]=a):a=k[8];var L=a;if(k[9]!==((e=G.current)==null?void 0:e.interactionUUID)||k[10]!==D){z=function(){var a;a=(a=G.current)==null?void 0:a.interactionUUID;!D&&a!=null&&c("InteractionTracingMetrics").addMarkerPoint(a,"EBRestoreUpsellCheck","AppTiming")};k[9]=(g=G.current)==null?void 0:g.interactionUUID;k[10]=D;k[11]=z}else z=k[11];k[12]!==G||k[13]!==D?(A=[G,D],k[12]=G,k[13]=D,k[14]=A):A=k[14];q(z,A);if(k[15]!==K||k[16]!==L||k[17]!==(w==null?void 0:(a=w.viewer.encrypted_backup)==null?void 0:a.has_seen_eb_auto_restore_notice)||k[18]!==D||k[19]!==C){e=function(){if(!D&&C&&c("gkx")("5229")&&I.current===!1){var a;K==null?void 0:K({hasSeenNotice:(a=w==null?void 0:(a=w.viewer.encrypted_backup)==null?void 0:a.has_seen_eb_auto_restore_notice)!=null?a:!1,source:J});I.current=!0;L()}};k[15]=K;k[16]=L;k[17]=w==null?void 0:(g=w.viewer.encrypted_backup)==null?void 0:g.has_seen_eb_auto_restore_notice;k[18]=D;k[19]=C;k[20]=e}else e=k[20];A=w==null?void 0:(z=w.viewer.encrypted_backup)==null?void 0:z.has_seen_eb_auto_restore_notice;k[21]!==K||k[22]!==L||k[23]!==D||k[24]!==A||k[25]!==C?(a=[K,L,A,D,J,C],k[21]=K,k[22]=L,k[23]=D,k[24]=A,k[25]=C,k[26]=a):a=k[26];q(e,a);if(l)return null;k[27]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__ptC-BqtItMK__JHASH__"),k[27]=g):g=k[27];k[28]===Symbol["for"]("react.memo_cache_sentinel")?(z=(m||(m=c("stylex")))([t.cardWidth]),k[28]=z):z=k[28];k[29]!==E||k[30]!==n||k[31]!==L||k[32]!==w||k[33]!==D?(A=o.jsx(c("BaseMultiStepContainer.react"),{fitContentWidth:!0,children:function(a){return o.jsx(c("CometErrorBoundary.react"),{fallback:function(){return o.jsx(c("CometMessagingJewelDropdownContent.react"),{onClose:n,pushPage:a,query:w})},children:o.jsx(c("CometMessagingJewelDropdownContent.react"),{ebSoftblockUpsell:D?o.jsx(c("MWChatEncryptedBackupsRestoreUpsellWrapper"),{displayAutoRestoreConsentScreenOnLoad:E,onCloseSoftblock:L,query:w.xfb_backup,viewer:w.viewer}):null,onClose:n,pushPage:a,query:w})})}}),k[29]=E,k[30]=n,k[31]=L,k[32]=w,k[33]=D,k[34]=A):A=k[34];k[35]!==z||k[36]!==A?(e=o.jsx(c("CometTopNavListDropdown.react"),{label:g,name:"MWJewelDropdown",children:o.jsx(c("MWEBFlowSourceContextProvider.react"),{source:J,children:o.jsx("div",{className:z,children:A})})}),k[35]=z,k[36]=A,k[37]=e):e=k[37];return e}function u(a){a=a.getRoot().getLinkedRecord("viewer");if(a==null){c("FBLogger")("labyrinth_web").mustfix("[labyrinth][jewel_softblock_state] A viewer record does not exist when propagating EB softblock state.");return}a.setValue(null,"jewel_softblock_state")}function v(a){a=a.authorityLevel;return(k||(k=d("I64"))).equal(a,(l||(l=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))}g["default"]=a}),226);
__d("MWChatEBJewelChatTabAutoRestoreConsentStepDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MWChatEBJewelChatTabAutoRestoreConsentStep.react").__setRef("MWChatEBJewelChatTabAutoRestoreConsentStepDeferred.react"));function a(a){var b=d("react-compiler-runtime").c(2);a=a.onCloseSoftblock;var c;b[0]!==a?(c=i.jsx(j,{onCloseSoftblock:a}),b[0]=a,b[1]=c):c=b[1];return c}g["default"]=a}),98);
__d("MWEBConnections4AndroidIcon.react",["ix","CometImageFromIXValue.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("gkx")("23433");b=j.forwardRef(a);function a(a,b){var e=d("react-compiler-runtime").c(7),f=a.alt,g=a.size;a=a.xstyle;g=g===void 0?"large":g;var i;e[0]!==g?(i=g==="large"?k?h("398892"):h("398891"):h("398080"),e[0]=g,e[1]=i):i=e[1];g=i;e[2]!==f||e[3]!==b||e[4]!==g||e[5]!==a?(i=j.jsx(c("CometImageFromIXValue.react"),{alt:f,ref:b,source:g,xstyle:a}),e[2]=f,e[3]=b,e[4]=g,e[5]=a,e[6]=i):i=e[6];return i}e=b;g["default"]=e}),98);
__d("MWChatEncryptedBackupsRestoreJewelChatTabContentPinInput.react",["fbt","FocusRegion.react","MWChatEBPinCodeVerifyIndicator.react","MWChatEncryptedBackupsForgotPINDialog.entrypoint","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsUpsellJewelChatTabLayout.react","MWEBConnections4AndroidIcon.react","MWEBOTCDialog.entrypoint","MWJewelPopoverDialogContext.react","MWXButton.react","MWXColumn.react","MWXColumnItem.react","MWXLink.react","MWXText.react","QPLUserFlow","focusScopeQueries","react","react-compiler-runtime","react-forget-runtime","useMWChatEncryptedBackupsPinCodeRestore","useMWEBFlowSourceContext","useMWXEntryPointDialog","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;b.useContext;var k={icon:{height:"xt7dq6l",width:"x1602a87",$$css:!0}},l="chat-encrypted-backups-jewel-chattab-restore-step-input";function a(a){var b=d("react-compiler-runtime").c(61),e=a.clientID,f=a.dismissSoftblock,g=a.doesUserHaveOtcEligibleDevices,i=a.inProgressState,p=a.onComplete,q=a.onImpressionQpl,r=a.onSubmit,s=a.onSubmitFailure,t=a.upsellImpressions;b[0]!==e||b[1]!==p||b[2]!==r||b[3]!==s?(a={clientID:e,focusRegionId:l,onSubmitPin:r,onSubmitPinFailure:s,onVestaComplete:p},b[0]=e,b[1]=p,b[2]=r,b[3]=s,b[4]=a):a=b[4];e=d("useMWChatEncryptedBackupsPinCodeRestore").useMWChatEncryptedBackupsPinCodeRestore(a);p=e.inputProps;r=e.isInProgress;s=e.isLabyrinthError;a=e.isPinCodeIncorrect;e=e.isVestaError;var u;b[5]!==q?(u={onVisible:function(){d("FocusRegion.react").focusRegionById(l,d("focusScopeQueries").tabbableScopeQuery),q(o)}},b[5]=q,b[6]=u):u=b[6];u=c("useVisibilityObserver")(u);var v;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(v={},b[7]=v):v=b[7];v=c("useMWXEntryPointDialog")(c("MWChatEncryptedBackupsForgotPINDialog.entrypoint"),v);var w=v[0];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(v={},b[8]=v):v=b[8];v=c("useMWXEntryPointDialog")(c("MWEBOTCDialog.entrypoint"),v);var x=v[0];v=c("useMWEBFlowSourceContext")();var y;b[9]!==v?(y=v(),b[9]=v,b[10]=y):y=b[10];var z=y;b[11]!==x||b[12]!==z?(v=function(){x({source:z},n)},b[11]=x,b[12]=z,b[13]=v):v=b[13];var A=v;b[14]!==f||b[15]!==w?(y=function(){w({onDismiss:f})},b[14]=f,b[15]=w,b[16]=y):y=b[16];var B=y;v=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(c("MWJewelPopoverDialogContext.react"),m);var C=v.setIsOpenForDialog;y=i||r;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(v=h._("__JHASH__3BKxTUYmmOC__JHASH__"),b[17]=v):v=b[17];i=v;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(r=j.jsx(c("MWXColumnItem.react"),{align:"center",paddingVertical:8,children:j.jsx(c("MWEBConnections4AndroidIcon.react"),{xstyle:k.icon})}),b[18]=r):r=b[18];b[19]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsx(c("MWXColumnItem.react"),{paddingHorizontal:20,children:j.jsx(c("MWXText.react"),{align:"center",type:"headlineEmphasized2",children:h._("__JHASH__Y2CrjVjbob2__JHASH__")})}),b[19]=v):v=b[19];b[20]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("MWXColumnItem.react"),{children:j.jsx("div",{className:"x1chd833 xjv05ge",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:i})})}),b[20]=i):i=b[20];var D;b[21]!==s||b[22]!==a||b[23]!==e?(D=a?h._("__JHASH__TG8l6XqQAul__JHASH__"):s||e?h._("__JHASH__oI6Lha5PMTv__JHASH__"):void 0,b[21]=s,b[22]=a,b[23]=e,b[24]=D):D=b[24];b[25]!==p||b[26]!==y?(s=j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:l,children:j.jsx(c("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers["extends"]({},p,{disabled:y,inputSize:"small",testid:void 0}))}),b[25]=p,b[26]=y,b[27]=s):s=b[27];b[28]!==D||b[29]!==s?(a=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:D,inputSize:"small",children:s})}),b[28]=D,b[29]=s,b[30]=a):a=b[30];b[31]!==y?(e=y?j.jsx("div",{className:"xs9mwh0",children:j.jsx(c("MWChatEBPinCodeVerifyIndicator.react"),{isMessenger:!1})}):null,b[31]=y,b[32]=e):e=b[32];b[33]!==e?(p=j.jsx(c("MWXColumnItem.react"),{paddingVertical:8,children:e}),b[33]=e,b[34]=p):p=b[34];b[35]===Symbol["for"]("react.memo_cache_sentinel")?(D="x1xmf6yo",b[35]=D):D=b[35];b[36]!==g||b[37]!==y||b[38]!==B||b[39]!==A||b[40]!==C?(s=j.jsx(c("MWXColumnItem.react"),{children:j.jsx("div",{className:D,children:g===!0?j.jsx(c("MWXButton.react"),{disabled:y,label:h._("__JHASH__rIytKXj5Yr0__JHASH__"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK"),C(!0),A()},reduceEmphasis:!1,testid:void 0,type:"secondary"}):j.jsx(c("MWXButton.react"),{disabled:y,label:h._("__JHASH__UY_FDJp7Rzt__JHASH__"),onPress:function(){C(!0),B()},reduceEmphasis:!1,testid:void 0,type:"secondary"})})}),b[36]=g,b[37]=y,b[38]=B,b[39]=A,b[40]=C,b[41]=s):s=b[41];b[42]===Symbol["for"]("react.memo_cache_sentinel")?(e="x1xka2u1 x14vqqas",b[42]=e):e=b[42];D=y?"disabled":"blueLink";b[43]!==f||b[44]!==t?(g=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_ENTRY_PIN_CODE_SKIP_FOR_NOW_CLICK"),f(),c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{amount_softblock_deferred:t()}}),d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"SKIP_FOR_NOW",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent})},b[43]=f,b[44]=t,b[45]=g):g=b[45];var E;b[46]===Symbol["for"]("react.memo_cache_sentinel")?(E=h._("__JHASH__RSkgoQ-3w23__JHASH__"),b[46]=E):E=b[46];b[47]!==y||b[48]!==g?(E=j.jsx(c("MWXLink.react"),{disabled:y,onClick:g,testid:void 0,children:E}),b[47]=y,b[48]=g,b[49]=E):E=b[49];b[50]!==D||b[51]!==E?(y=j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx("div",{className:e,children:j.jsx(c("MWXText.react"),{color:D,type:"bodyLink3",children:E})})}),b[50]=D,b[51]=E,b[52]=y):y=b[52];b[53]!==s||b[54]!==y?(g=j.jsxs(c("MWXColumn.react"),{paddingHorizontal:16,paddingVertical:0,spacing:8,children:[s,y]}),b[53]=s,b[54]=y,b[55]=g):g=b[55];b[56]!==u||b[57]!==a||b[58]!==p||b[59]!==g?(e=j.jsx(c("MWChatEncryptedBackupsUpsellJewelChatTabLayout.react"),{size:"large",children:j.jsxs(c("MWXColumn.react"),{ref:u,children:[r,v,i,a,p,g]})}),b[56]=u,b[57]=a,b[58]=p,b[59]=g,b[60]=e):e=b[60];return e}function m(a){return[a.setIsOpenForDialog]}function n(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_CLOSE_DIALOG_CLICK")}function o(){return c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_ENTRY_JEWEL_PIN_CODE_RESTORE_SCREEN")}g["default"]=a}),226);
__d("MWChatEncryptedBackupsRestoreJewelChatTabContentRCInput.react",["fbt","EBSMGating","JSResourceForInteraction","MWChatEncryptedBackupsAccessCodeInput.react","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsUpsellJewelChatTabLayout.react","MWEBConnections4AndroidIcon.react","MWEBODSEntityKey.enum","MWEBODSEntityName.enum","MWEBOTCDialog.entrypoint","MWEncryptedBackupsLocalStorageEntryEnum","MWJewelPopoverDialogContext.react","MWXButton.react","MWXColumn.react","MWXColumnItem.react","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","QPLUserFlow","promiseDone","react","react-compiler-runtime","react-forget-runtime","requireDeferred","useLabyrinthLogging","useMAWEncryptedBackupsRestoreToast","useMWChatEncryptedBackupsAddDevice","useMWEBFlowSourceContext","useMWXEntryPointDialog","useMWXLazyDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;b.useContext;var l=b.useState,m=c("requireDeferred")("MWEBUseLocalStorage").__setRef("MWChatEncryptedBackupsRestoreJewelChatTabContentRCInput.react"),n=c("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("MWChatEncryptedBackupsRestoreJewelChatTabContentRCInput.react"),o={icon:{height:"xt7dq6l",width:"x1602a87",$$css:!0}},p=c("JSResourceForInteraction")("MWChatEncryptedbackupsForgotRCWrapper.react").__setRef("MWChatEncryptedBackupsRestoreJewelChatTabContentRCInput.react");function a(a){var b=d("react-compiler-runtime").c(73),e=a.dismissSoftblock,f=a.doesUserHaveOtcEligibleDevices,g=a.inProgressState,j=a.onComplete,u=a.onImpressionQpl,v=a.onSubmit,w=a.onSubmitFailure,x=a.upsellImpressions;a=l("");var y=a[0],z=a[1];a=l(!1);var A=a[0],B=a[1];a=l(!1);var C=a[0],D=a[1],E=(i||(i=c("useReStore")))();a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var F=a.startFlow;b[0]!==w?(a=function(){w(),d("MWChatEncryptedBackupsLogging").endFailure({errorName:"wrong_recovery_code",event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityKey:c("MWEBODSEntityKey.enum").INCORRECT_RECOVERY_CODE,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_RC_RESTORE_AUTH}),c("QPLUserFlow").markError(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"invalid_recovery_code_input"),B(!0)},b[0]=w,b[1]=a):a=b[1];a=a;var G=c("useMWEBFlowSourceContext")(),H=c("useMWXLazyDialog")(p),I=H[0];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(H={},b[2]=H):H=b[2];H=c("useMWXEntryPointDialog")(c("MWEBOTCDialog.entrypoint"),H);var J=H[0];b[3]!==e||b[4]!==I?(H=function(){I({onDismiss:e})},b[3]=e,b[4]=I,b[5]=H):H=b[5];var K=H;H=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(c("MWJewelPopoverDialogContext.react"),t);var L=H.setIsOpenForDialog;H=c("useMAWEncryptedBackupsRestoreToast")();var M=H.showErrorToast;b[6]!==C||b[7]!==A?(H=function(a){(A||C)&&(B(!1),D(!1)),z(a)},b[6]=C,b[7]=A,b[8]=H):H=b[8];H=H;var N;b[9]!==E||b[10]!==j?(N=function(){var a;c("QPLUserFlow").addPoint((a=d("MWChatEncryptedBackupsQPLEvents")).restoreDeviceAuthQplEvent,"add_device_success");c("QPLUserFlow").addPoint(a.restoreQplEvent,"restore_auth_finished_and_dismissed");n.onReady(function(a){a=a.upsertEBSharedStateEntry;c("promiseDone")(a({db:E,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))});m.onReady(s);d("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:d("EBSMGating").isBackendSetupSuccessfulForEBSM()}},event:a.restoreQplEvent});d("MWChatEncryptedBackupsLogging").endSuccess({event:a.restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_RC_RESTORE_AUTH});j()},b[9]=E,b[10]=j,b[11]=N):N=b[11];N=N;var O;b[12]!==w||b[13]!==M?(O=function(a){w(),d("MWChatEncryptedBackupsLogging").endFailure({errorName:a,event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),d("MWChatEncryptedBackupsLogging").endFailure({errorName:a,event:d("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_RC_RESTORE_AUTH}),D(!0),M()},b[12]=w,b[13]=M,b[14]=O):O=b[14];O=O;var P;b[15]!==a||b[16]!==N||b[17]!==O?(P={onComplete:N,onFailure:O,onInvalidRecoveryCode:a},b[15]=a,b[16]=N,b[17]=O,b[18]=P):P=b[18];a=c("useMWChatEncryptedBackupsAddDevice")(P);var Q=a[0];N=a[1];b[19]!==u?(O={onVisible:function(){u(r)}},b[19]=u,b[20]=O):O=b[20];P=c("useVisibilityObserver")(O);a=g||N;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(O=k.jsx(c("MWXColumnItem.react"),{align:"center",paddingVertical:8,children:k.jsx(c("MWEBConnections4AndroidIcon.react"),{xstyle:o.icon})}),b[21]=O):O=b[21];b[22]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("MWXColumnItem.react"),{paddingHorizontal:20,children:k.jsx(c("MWXText.react"),{align:"center",type:"headlineEmphasized2",children:h._("__JHASH__bBMI7LHEY6z__JHASH__")})}),b[22]=g):g=b[22];b[23]===Symbol["for"]("react.memo_cache_sentinel")?(N="x1chd833 xjv05ge",b[23]=N):N=b[23];b[24]===Symbol["for"]("react.memo_cache_sentinel")?(N=k.jsx(c("MWXColumnItem.react"),{children:k.jsx("div",{className:N,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:h._("__JHASH__5EqF8X-sE30__JHASH__")})})}),b[24]=N):N=b[24];var R;b[25]!==C||b[26]!==A?(R=A?h._("__JHASH__zPXS5-jS-2c__JHASH__"):C?h._("__JHASH__6LAMoj-h7lg__JHASH__"):void 0,b[25]=C,b[26]=A,b[27]=R):R=b[27];var S;b[28]!==Q||b[29]!==G||b[30]!==v||b[31]!==L||b[32]!==F?(S=function(a){var b;v();c("QPLUserFlow").addPoint((b=d("MWChatEncryptedBackupsQPLEvents")).restoreQplEvent,"RECOVERY_CODE_AUTO_SUBMIT");L(!0);var e=G();c("QPLUserFlow").addAnnotations(b.restoreQplEvent,{string:{restore_type:"recovery_code",source:e}});F({additionalAnnotations:{device_type:"OFFLINE"},event:b.restoreDeviceAuthQplEvent,odsEntityName:c("MWEBODSEntityName.enum").MW_EB_RC_RESTORE_AUTH,source:e});c("QPLUserFlow").addPoint(b.restoreDeviceAuthQplEvent,"add_device_begin");Q(a)},b[28]=Q,b[29]=G,b[30]=v,b[31]=L,b[32]=F,b[33]=S):S=b[33];var T;b[34]!==y||b[35]!==a||b[36]!==H||b[37]!==S?(T=k.jsx(c("MWChatEncryptedBackupsAccessCodeInput.react"),{autoSubmit:!0,disabled:a,onComplete:S,onValueChange:H,smallInput:!0,value:y}),b[34]=y,b[35]=a,b[36]=H,b[37]=S,b[38]=T):T=b[38];b[39]!==R||b[40]!==T?(y=k.jsx(c("MWXColumnItem.react"),{align:"center",paddingHorizontal:12,children:k.jsx(c("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:R,inputSize:"small",children:T})}),b[39]=R,b[40]=T,b[41]=y):y=b[41];b[42]!==a?(H=a?k.jsxs(c("MWXRow.react"),{align:"center",verticalAlign:"center",children:[k.jsx(c("MWXRowItem.react"),{children:k.jsx(c("MWXSpinner.react"),{color:"blue",size:12})}),k.jsx(c("MWXRowItem.react"),{children:k.jsx(c("MWXText.react"),{color:"secondary",testid:void 0,type:"meta3",children:h._("__JHASH__M1mdHGwWmSl__JHASH__")})})]}):null,b[42]=a,b[43]=H):H=b[43];b[44]!==H?(S=k.jsx(c("MWXColumnItem.react"),{children:H}),b[44]=H,b[45]=S):S=b[45];b[46]===Symbol["for"]("react.memo_cache_sentinel")?(R="x1xmf6yo",b[46]=R):R=b[46];b[47]!==f||b[48]!==G||b[49]!==a||b[50]!==K||b[51]!==L||b[52]!==J?(T=k.jsx(c("MWXColumnItem.react"),{children:k.jsx("div",{className:R,children:f===!0?k.jsx(c("MWXButton.react"),{disabled:a,label:h._("__JHASH__rIytKXj5Yr0__JHASH__"),onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK");var a=G();J({source:a},q)},reduceEmphasis:!1,testid:void 0,type:"secondary"}):k.jsx(c("MWXButton.react"),{label:h._("__JHASH__TJHhepIDy5c__JHASH__"),onPress:function(){L(!0),K()},reduceEmphasis:!1,testid:void 0,type:"secondary"})})}),b[47]=f,b[48]=G,b[49]=a,b[50]=K,b[51]=L,b[52]=J,b[53]=T):T=b[53];b[54]===Symbol["for"]("react.memo_cache_sentinel")?(H="x1xka2u1 x14vqqas",b[54]=H):H=b[54];R=a?"disabled":"blueLink";b[55]!==e||b[56]!==x?(f=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RC_SKIP_FOR_NOW_CLICK"),e(),c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{amount_softblock_deferred:x()}}),d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"SKIP_FOR_NOW",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent})},b[55]=e,b[56]=x,b[57]=f):f=b[57];var U;b[58]===Symbol["for"]("react.memo_cache_sentinel")?(U=h._("__JHASH__RSkgoQ-3w23__JHASH__"),b[58]=U):U=b[58];b[59]!==a||b[60]!==f?(U=k.jsx(c("MWXLink.react"),{disabled:a,onClick:f,testid:void 0,children:U}),b[59]=a,b[60]=f,b[61]=U):U=b[61];b[62]!==R||b[63]!==U?(a=k.jsx(c("MWXColumnItem.react"),{align:"center",children:k.jsx("div",{className:H,children:k.jsx(c("MWXText.react"),{color:R,type:"bodyLink3",children:U})})}),b[62]=R,b[63]=U,b[64]=a):a=b[64];b[65]!==T||b[66]!==a?(f=k.jsxs(c("MWXColumn.react"),{paddingHorizontal:16,paddingTop:8,spacing:8,children:[T,a]}),b[65]=T,b[66]=a,b[67]=f):f=b[67];b[68]!==P||b[69]!==y||b[70]!==S||b[71]!==f?(H=k.jsx(c("MWChatEncryptedBackupsUpsellJewelChatTabLayout.react"),{size:"large",children:k.jsxs(c("MWXColumn.react"),{ref:P,children:[O,g,N,y,S,f]})}),b[68]=P,b[69]=y,b[70]=S,b[71]=f,b[72]=H):H=b[72];return H}function q(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_CLOSE_DIALOG_CLICK")}function r(){return c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"RC_ENTRY_JEWEL_RECOVERY_CODE_RESTORE_SCREEN")}function s(a){var b=a.mwEBCreateLocalStorageEntry;a=a.mwEBDeleteLocalStorageEntry;b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2);a(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}function t(a){return[a.setIsOpenForDialog]}g["default"]=a}),226);
__d("MWEBRestoreMoreOptionsDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8739286566101143"}),null);
__d("MWEBRestoreMoreOptionsDialogQuery$Parameters",["MWEBRestoreMoreOptionsDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWEBRestoreMoreOptionsDialogQuery_facebookRelayOperation"),metadata:{},name:"MWEBRestoreMoreOptionsDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWEBRestoreMoreOptionsDialog.entrypoint",["JSResourceForInteraction","MWEBRestoreMoreOptionsDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{moreOptionsQueryReference:{parameters:c("MWEBRestoreMoreOptionsDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWEBRestoreMoreOptionsDialog.react").__setRef("MWEBRestoreMoreOptionsDialog.entrypoint")};g["default"]=a}),98);
__d("MWEBRestoreJewelOTCFirst.react",["fbt","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsUpsellJewelChatTabLayout.react","MWEBOTCDialog.entrypoint","MWEBRestoreMoreOptionsDialog.entrypoint","MWEBSyncIcon.react","MWJewelPopoverDialogContext.react","MWXButton.react","MWXColumn.react","MWXColumnItem.react","MWXLink.react","MWXText.react","QPLUserFlow","react","react-compiler-runtime","react-forget-runtime","useMWEBFlowSourceContext","useMWXEntryPointDialog","useVisibilityObserver","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;b.useContext;function a(a){var b=d("react-compiler-runtime").c(38),e=a.dismissSoftblock,f=a.onImpressionQpl,g=a.upsellImpressions;c("vulture")("1szHmh2qorf");b[0]!==f?(a={onVisible:function(){f(m)}},b[0]=f,b[1]=a):a=b[1];a=c("useVisibilityObserver")(a);var i;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i={},b[2]=i):i=b[2];i=c("useMWXEntryPointDialog")(c("MWEBOTCDialog.entrypoint"),i);var n=i[0];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i={},b[3]=i):i=b[3];i=c("useMWXEntryPointDialog")(c("MWEBRestoreMoreOptionsDialog.entrypoint"),i);var o=i[0];i=c("useMWEBFlowSourceContext")();var p;b[4]!==i?(p=i(),b[4]=i,b[5]=p):p=b[5];var q=p;b[6]!==n||b[7]!==q?(i=function(){n({source:q},l)},b[6]=n,b[7]=q,b[8]=i):i=b[8];var r=i;b[9]!==e||b[10]!==o||b[11]!==q||b[12]!==g?(p=function(){o({onOptOut:function(){e(),c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{amount_softblock_deferred:g()}}),d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"MORE_OPTIONS_DIALOG_DO_NOT_RESTORE",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent})},source:q})},b[9]=e,b[10]=o,b[11]=q,b[12]=g,b[13]=p):p=b[13];var s=p;i=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(c("MWJewelPopoverDialogContext.react"),k);var t=i.setIsOpenForDialog;b[14]===Symbol["for"]("react.memo_cache_sentinel")?(p=j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWEBSyncIcon.react"),{})}),b[14]=p):p=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("MWXColumnItem.react"),{paddingHorizontal:20,paddingTop:0,paddingVertical:8,children:j.jsx(c("MWXText.react"),{align:"center",type:"headlineEmphasized2",children:h._("__JHASH__c_s23abhnt6__JHASH__")})}),b[15]=i):i=b[15];var u;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(u=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:h._("__JHASH__tNC5yN0XFze__JHASH__")})}),b[16]=u):u=b[16];var v;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(v=h._("__JHASH__95blpFaRbPC__JHASH__"),b[17]=v):v=b[17];b[18]!==r||b[19]!==t?(v=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXButton.react"),{label:v,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_SEND_CODE_CLICK"),t(!0),r()},reduceEmphasis:!1,testid:void 0,type:"primary"})}),b[18]=r,b[19]=t,b[20]=v):v=b[20];var w;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._("__JHASH__OFSirhauIwo__JHASH__"),b[21]=w):w=b[21];b[22]!==s||b[23]!==t?(w=j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXButton.react"),{label:w,onPress:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_MORE_OPTIONS_CLICK"),t(!0),s()},reduceEmphasis:!1,testid:void 0,type:"secondary"})}),b[22]=s,b[23]=t,b[24]=w):w=b[24];var x;b[25]!==v||b[26]!==w?(x=j.jsxs(c("MWXColumn.react"),{paddingTop:4,paddingVertical:0,spacing:8,children:[v,w]}),b[25]=v,b[26]=w,b[27]=x):x=b[27];b[28]!==e||b[29]!==g?(v=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_SKIP_FOR_NOW_CLICK"),e(),c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{amount_softblock_deferred:g()}}),d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"SKIP_FOR_NOW",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent})},b[28]=e,b[29]=g,b[30]=v):v=b[30];b[31]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._("__JHASH__RSkgoQ-3w23__JHASH__"),b[31]=w):w=b[31];b[32]!==v?(w=j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink3",children:j.jsx(c("MWXLink.react"),{onClick:v,testid:void 0,children:w})})}),b[32]=v,b[33]=w):w=b[33];b[34]!==a||b[35]!==x||b[36]!==w?(v=j.jsx(c("MWChatEncryptedBackupsUpsellJewelChatTabLayout.react"),{size:"large",children:j.jsxs(c("MWXColumn.react"),{paddingHorizontal:16,ref:a,spacing:12,children:[p,i,u,x,w]})}),b[34]=a,b[35]=x,b[36]=w,b[37]=v):v=b[37];return v}function k(a){return[a.setIsOpenForDialog]}function l(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_CLOSE_OTC_INSERT_DIALOG_CLICK")}function m(){return c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FIRST_RESTORE_JEWEL_SCREEN_IMPRESSION")}g["default"]=a}),226);
__d("MWChatEncryptedBackupsRestoreJewelChatTabInputScreenWrapper.react",["MWChatEncryptedBackupsRestoreJewelChatTabContentPinInput.react","MWChatEncryptedBackupsRestoreJewelChatTabContentRCInput.react","MWEBRestoreJewelOTCFirst.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(23),e=a.dismissSoftblock,f=a.doesUserHaveOtcEligibleDevices,g=a.inProgressState,h=a.isRCSet,j=a.onCloseSoftblock,k=a.onComplete,l=a.onImpressionQpl,m=a.onSubmit,n=a.onSubmitFailure,o=a.upsellImpressions;a=a.vestaClientID;if(a!=null){var p;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==k||b[4]!==l||b[5]!==m||b[6]!==n||b[7]!==o||b[8]!==a?(p=i.jsx(c("MWChatEncryptedBackupsRestoreJewelChatTabContentPinInput.react"),{clientID:a,dismissSoftblock:e,doesUserHaveOtcEligibleDevices:f,inProgressState:g,onComplete:k,onImpressionQpl:l,onSubmit:m,onSubmitFailure:n,upsellImpressions:o}),b[0]=e,b[1]=f,b[2]=g,b[3]=k,b[4]=l,b[5]=m,b[6]=n,b[7]=o,b[8]=a,b[9]=p):p=b[9];return p}else if(f===!0){b[10]!==e||b[11]!==l||b[12]!==o?(a=i.jsx(c("MWEBRestoreJewelOTCFirst.react"),{dismissSoftblock:e,onImpressionQpl:l,upsellImpressions:o}),b[10]=e,b[11]=l,b[12]=o,b[13]=a):a=b[13];return a}else if(h){b[14]!==e||b[15]!==f||b[16]!==g||b[17]!==k||b[18]!==l||b[19]!==m||b[20]!==n||b[21]!==o?(p=i.jsx(c("MWChatEncryptedBackupsRestoreJewelChatTabContentRCInput.react"),{dismissSoftblock:e,doesUserHaveOtcEligibleDevices:f,inProgressState:g,onComplete:k,onImpressionQpl:l,onSubmit:m,onSubmitFailure:n,upsellImpressions:o}),b[14]=e,b[15]=f,b[16]=g,b[17]=k,b[18]=l,b[19]=m,b[20]=n,b[21]=o,b[22]=p):p=b[22];return p}j();return null}g["default"]=a}),98);
__d("MWChatEncryptedBackupsRestoreUpsellLoader_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsRestoreUpsellLoader_viewer",selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"jewel_softblock_state",storageKey:null}]}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("MWChatEncryptedBackupsRestoreUpsellLoader.react",["CometRelay","FBLogger","InteractionTracingMetrics","JSResourceForInteraction","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsRestoreJewelChatTabInputScreenWrapper.react","MWChatEncryptedBackupsRestoreUpsellLoader_viewer.graphql","MWEBFlowSourceContextProvider.react","MWEBJewelSoftblockState.enum","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","QPLUserFlow","ReQL","ReQLSuspense","hero-tracing-placeholder","promiseDone","react","requireDeferred","useLabyrinthLogging","useMWChatEncryptedBackupsVestaUserInfo","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useContext,n=e.useEffect,o=e.useRef,p=e.useState,q=c("requireDeferred")("MWEBUseLocalStorage").__setRef("MWChatEncryptedBackupsRestoreUpsellLoader.react"),r=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWChatEncryptedBackupsRestoreUpsellLoader.react"),s=c("JSResourceForInteraction")("MWChatEncryptedBackupsPinCodeBlockedDialog.react").__setRef("MWChatEncryptedBackupsRestoreUpsellLoader.react");function a(a){var e=a.onCloseSoftblock,g=a.pushAutoRestoreConsentPage,j=a.source;a=a.viewer;var t=d("CometRelay").useFragment(h!==void 0?h:h=b("MWChatEncryptedBackupsRestoreUpsellLoader_viewer.graphql"),a);a=p(t==null?void 0:t.jewel_softblock_state);var u=a[0],v=a[1],w=(i||(i=c("useReStore")))(),x=d("CometRelay").useRelayEnvironment();a=t==null?void 0:(a=t.messenger_default_encrypted_backup)==null?void 0:a.vesta_user_info;var y=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(w.tables.experiences_shared_state)},[w],f.id+":90"),z=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();z=z.virtualDeviceInfo;var A=c("useMWChatEncryptedBackupsVestaUserInfo")({vestaGetUserInfoResponse$key:a});a=z.offlineDevicesCount>0;var B=p(!1),C=B[0],D=B[1],E=o(!1),F=o(!1);B=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var G=B.startFlow;B=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:w,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,k=b.hasUserRestoredBefore,l=b.hasUserRestoredBeforeTemp;b=b.impressionsCount;G({additionalAnnotations:{amount_softblock_deferred:b,eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:k,has_user_restored_before_temp:l,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:j});a();F.current===!1&&(F.current=!0,c("promiseDone")(r.load(),function(a){return a(g)}))},upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.SOFTBLOCK_JEWEL_AND_CHAT_TAB})};var H=A.attemptsRemaining===0||A.loginTimeoutRemainingSecs!=null,I=c("useMWXLazyDialog")(s),J=I[0],K=l(function(){return q.onReady(function(a){a=a.mwEBCreateLocalStorageEntry;a(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_SHOULD_NOT_DISPLAY_SOFTBLOCK)})},[]),L=l(function(a){return d("CometRelay").commitLocalUpdate(x,function(b){b=b.getRoot().getLinkedRecord("viewer");if(b==null){c("FBLogger")("labyrinth_web").mustfix("[labyrinth][jewel_softblock_state] A viewer record does not exist when propagating EB softblock state.");return}b.setValue(a,"jewel_softblock_state")})},[x]),M=l(function(){e(),K()},[K,e]),N=l(function(){return d("MWEncryptedBackupsDeferLocalStorageUpsell").getUpsellImpressions({db:w,sharedStateTable:y,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.SOFTBLOCK_JEWEL_AND_CHAT_TAB})},[w,y]);n(function(){switch(t==null?void 0:t.jewel_softblock_state){case c("MWEBJewelSoftblockState.enum").CONSENT_SCREEN:u===c("MWEBJewelSoftblockState.enum").RESTORE_IN_PROGRESS&&g();break}v(t==null?void 0:t.jewel_softblock_state)},[t==null?void 0:t.jewel_softblock_state,u,g]);n(function(){H&&C===!0&&E.current!==!0&&(E.current=!0,J({attemptsRemaining:A.attemptsRemaining,loginTimeoutRemainingSecs:A.loginTimeoutRemainingSecs,onDismiss:M}))},[H,M,J,C,A.attemptsRemaining,A.loginTimeoutRemainingSecs]);I=(I=m(d("hero-tracing-placeholder").HeroCurrentInteractionForLoggingContext).current)==null?void 0:I.interactionUUID;c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addMarkerPoint(a.traceId,"EBRestoreUpsell","VisualCompletion")});if(H===!0){e();return null}I!=null&&c("InteractionTracingMetrics").addAnnotationInt(I,"EBRestoreUpsell",1);return k.jsx(c("MWEBFlowSourceContextProvider.react"),{source:j,children:k.jsx(c("MWChatEncryptedBackupsRestoreJewelChatTabInputScreenWrapper.react"),{dismissSoftblock:M,doesUserHaveOtcEligibleDevices:z.doesUserHaveOtcEligibleDevices,inProgressState:(t==null?void 0:t.jewel_softblock_state)===c("MWEBJewelSoftblockState.enum").RESTORE_IN_PROGRESS,isRCSet:a,onCloseSoftblock:e,onComplete:function(){L(c("MWEBJewelSoftblockState.enum").CONSENT_SCREEN),K(),c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{amount_softblock_deferred:N()}})},onImpressionQpl:B,onSubmit:function(){L(c("MWEBJewelSoftblockState.enum").RESTORE_IN_PROGRESS),D(!0)},onSubmitFailure:function(){L(c("MWEBJewelSoftblockState.enum").INITIAL)},upsellImpressions:N,vestaClientID:z.vestaClientID})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);